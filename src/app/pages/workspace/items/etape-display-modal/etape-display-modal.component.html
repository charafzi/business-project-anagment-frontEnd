<nz-modal
  [(nzVisible)]="isVisible"
  [nzTitle]="modalTitle"
  [nzContent]="modalContent"
  [nzFooter]="modalFooter"
  (nzOnCancel)="this.etape.onClickHideModal()"
>
  <ng-template #modalTitle>Informations about the step :</ng-template>

  <ng-template #modalContent>
    <form nz-form [formGroup]="etapeForm" >
      <div nz-row [nzGutter]="24"
           class="row"
      >
        <div nz-col [nzSpan]="24">
          <nz-form-item>
            <nz-form-label >Description</nz-form-label>
            <nz-form-control nzHasFeedback [nzErrorTip]="descriptionErrorTpl">
              <nz-textarea-count class="text-area">
                <textarea formControlName="description" nz-input rows="2" placeholder="Description..."></textarea>
                <ng-template #descriptionErrorTpl let-control>
                  @if (control.errors?.['required']) {
                    Please fill in the description field
                  }
                  @if (control.errors?.['maxlength']) {
                    Please do not exceed 255 characters
                  }
                </ng-template>
              </nz-textarea-count>
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
      <div nz-row [nzGutter]="24" class="row">
        <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label>Order</nz-form-label>
            <nz-form-control>
              <nz-input-number formControlName="ordre" [nzMin]="1" [nzStep]="1"></nz-input-number>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label>Status</nz-form-label>
            <nz-form-control>
              <nz-select formControlName="statutEtape">
                <nz-option nzValue="Commencée" nzLabel="Started"></nz-option>
                <nz-option nzValue="Pas encore commencée" nzLabel="Not started yet"></nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
      <div nz-row class="row">
        <div nz-col [nzSpan]="7">
          <nz-form-item>
            <nz-form-label nzRequired>Estimated duration&nbsp;</nz-form-label>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item>
            <nz-input-number formControlName="dureeEstimee" [nzMin]="0" [nzStep]="1"></nz-input-number>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="13" [nzOffset]="1">
          <nz-form-control>
            <nz-radio-group formControlName="radioDureeEstimee">
              <label nz-radio nzValue="H">Hour<span>(s)</span></label>
              <label nz-radio nzValue="D">Day<span>(s)</span></label>
              <label nz-radio nzValue="M">Month<span>(s)</span></label>
            </nz-radio-group>
          </nz-form-control>
        </div>
      </div>
      <div nz-row class="row">
        <div nz-col [nzSpan]="7">
          <nz-form-item>
            <nz-form-label>Waiting period&nbsp;</nz-form-label>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="3">
          <nz-form-item>
            <nz-input-number formControlName="delaiAttente" [nzMin]="0" [nzStep]="1"></nz-input-number>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="13" [nzOffset]="1">
          <nz-form-control>
            <nz-radio-group formControlName="radioDelaiAttente">
              <label nz-radio nzValue="H">Hour<span>(s)</span></label>
              <label nz-radio nzValue="D">Day<span>(s)</span></label>
              <label nz-radio nzValue="M">Month<span>(s)</span></label>
            </nz-radio-group>
          </nz-form-control>
        </div>
      </div>
      <div nz-row class="row">
        <div nz-col [nzSpan]="8">
          <nz-form-item>
            <nz-form-label nzRequired>Is this a &nbsp;</nz-form-label>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="16">
          <nz-form-control>
            <nz-radio-group formControlName="radioFIE">
              <label nz-radio nzValue="F">First</label>
              <label nz-radio nzValue="I">Intermediate</label>
              <label nz-radio nzValue="E">End</label>
            </nz-radio-group>
          </nz-form-control>
        </div>
      </div>
      <div nz-row class="row"
           [nzJustify]="'space-evenly'"
      >
        <div nz-col [nzSpan]="4" [nzOffset]="8">
          <nz-form-item>
            <nz-form-control>
              <label nz-checkbox formControlName="isPaid">Paid</label>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="4" [nzOffset]="5">
          <nz-form-item>
            <nz-form-control>
              <label nz-checkbox formControlName="isValidate">Validated</label>
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
      <div nz-row>
        <div nz-col [nzSpan]="24">
          <nz-form-item>
            <nz-form-label >Progress</nz-form-label>
          </nz-form-item>
        </div>
      </div>
      <div nz-row [nzGutter]="24">
        <div nz-col [nzSpan]="24">
          <nz-form-item>
            <nz-form-control>
              <nz-progress [nzPercent]="percent"></nz-progress>
              <nz-button-group>
                <button nz-button (click)="decline()"><span nz-icon nzType="minus"></span></button>
                <button nz-button (click)="increase()"><span nz-icon nzType="plus"></span></button>
              </nz-button-group>
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
    </form>
  </ng-template>

  <ng-template #modalFooter>
    <button nz-button nzType="primary" (click)="validateForm()">Confirm</button>
  </ng-template>
</nz-modal>
