<form nz-form [formGroup]="etapeForm">
  <div class="row"
       nz-row
  >
    <div nz-col [nzSpan]="8">
      <nz-form-item>
        <nz-form-label>Categorie &nbsp;</nz-form-label>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="16">
      <nz-form-item>
        <nz-form-control nzErrorTip="This field is required !">
          <nz-select formControlName="categorie" nzShowSearch nzAllowClear nzPlaceHolder="Please select the category"
                     [nzLoading]="categories.length==0"
          >
            <nz-option *ngFor="let cat of categories" [nzValue]="cat.idCategorie" [nzLabel]="cat.nom"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>
  </div>
  <div nz-row class="row">
    <div nz-col [nzSpan]="24">
      <nz-form-item>
        <nz-form-label nzRequired>Description</nz-form-label>
        <nz-form-control nzHasFeedback [nzErrorTip]="descriptionErrorTpl">
          <nz-textarea-count class="text-area">
            <textarea formControlName="description" nz-input rows="2" placeholder="Description..."></textarea>
            <ng-template #descriptionErrorTpl let-control>
              @if (control.errors?.['required']) {
                Please fill in the description field
              }
              @if (control.errors?.['maxlength']) {
                Please do not exceed 255 characters
              }
            </ng-template>
          </nz-textarea-count>
        </nz-form-control>
      </nz-form-item>
    </div>
  </div>
  <div nz-row class="row">
    <div nz-col [nzSpan]="7">
      <nz-form-item>
        <nz-form-label nzRequired>Estimated duration&nbsp;</nz-form-label>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="4">
      <nz-form-item>
        <nz-form-control nzErrorTip="This field is required !">
          <nz-input-number formControlName="dureeEstimee" [nzMin]="0" [nzStep]="1"></nz-input-number>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="12" [nzOffset]="1">
      <nz-form-control nzErrorTip="This field is required !">
        <nz-radio-group formControlName="radioDureeEstimee">
          <label nz-radio nzValue="H">Hour<span>(s)</span></label>
          <label nz-radio nzValue="D">Day<span>(s)</span></label>
          <label nz-radio nzValue="M">Month<span>(s)</span></label>
        </nz-radio-group>
      </nz-form-control>
    </div>
  </div>
  <div nz-row class="row">
      <div nz-col [nzSpan]="7">
        <nz-form-item>
          <nz-form-label>Waiting period&nbsp;</nz-form-label>
        </nz-form-item>
      </div>
      <div nz-col [nzSpan]="4">
        <nz-form-item>
        <nz-form-control>
            <nz-input-number formControlName="delaiAttente" [nzMin]="0" [nzStep]="1"></nz-input-number>
        </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col [nzSpan]="12" [nzOffset]="1">
        <nz-form-control nzErrorTip="This field is required !">
          <nz-radio-group formControlName="radioDelaiAttente">
            <label nz-radio nzValue="H">Hour<span>(s)</span></label>
            <label nz-radio nzValue="D">Day<span>(s)</span></label>
            <label nz-radio nzValue="M">Month<span>(s)</span></label>
          </nz-radio-group>
        </nz-form-control>
      </div>
  </div>
  <div nz-row class="row">
    <div nz-col [nzSpan]="8">
      <nz-form-item>
        <nz-form-label nzRequired>Is this a &nbsp;</nz-form-label>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="16">
      <nz-form-control nzErrorTip="This field is required !">
        <nz-radio-group formControlName="radioFIE">
          <label nz-radio nzValue="F">First</label>
          <label nz-radio nzValue="I">Intermediate</label>
          <label nz-radio nzValue="E">End</label>
        </nz-radio-group>
      </nz-form-control>
    </div>
  </div>
  <div nz-row class="row"
  >
    <div nz-col [nzSpan]="8">
      <nz-form-item>
        <nz-form-label>To be paid </nz-form-label>
      </nz-form-item>
    </div>
    <div nz-col>
      <nz-form-control nzErrorTip="This field is required !">
        <nz-radio-group formControlName="radioPaid">
          <label nz-radio nzValue="Y">Yes</label>
          <label nz-radio nzValue="N">No</label>
        </nz-radio-group>
      </nz-form-control>
    </div>
  </div>
  <div nz-row class="row"
  >
    <div nz-col [nzSpan]="8">
      <nz-form-item>
        <nz-form-control>
          <nz-form-label>To be validated </nz-form-label>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col>
      <nz-form-control nzErrorTip="This field is required !">
        <nz-radio-group formControlName="radioValidated">
          <label nz-radio nzValue="Y">Yes</label>
          <label nz-radio nzValue="N">No</label>
        </nz-radio-group>
      </nz-form-control>
    </div>
  </div>
  <div nz-row class="row"
  >
    <div nz-col [nzSpan]="8">
      <nz-form-item>
        <nz-form-control>
          <nz-form-label>To be accepted</nz-form-label>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col>
      <nz-form-control nzErrorTip="This field is required !">
        <nz-radio-group formControlName="radioAccepted">
          <label nz-radio nzValue="Y">Yes</label>
          <label nz-radio nzValue="N">No</label>
        </nz-radio-group>
      </nz-form-control>
    </div>
  </div>

  <div class="row"
       nz-row
  >
    <div nz-col [nzSpan]="8">
      <nz-form-item>
        <nz-form-label>Steps before &nbsp;</nz-form-label>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="16">
      <nz-form-item>
        <nz-form-control>
          <nz-select formControlName="stepsBefore"
                     nzMode="multiple"
                     nzPlaceHolder="Please select the steps before this step"
          >
            <nz-option *ngFor="let item of etapes"
                       nzCustomContent
                       [nzLabel]="item.categorie?.nom ?? ''"
                       [nzValue]="item.indexLigne+'-'+item.indexColonne"
            >
              <span nz-tooltip
                    nzTooltipTitle="{{item.description}}">
                 {{item.categorie?.nom ?? ''}}
              </span>
            </nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>
  </div>
  <div class="row"
       nz-row
  >
    <div nz-col [nzSpan]="8">
      <nz-form-item>
        <nz-form-label>Steps after &nbsp;</nz-form-label>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="16">
      <nz-form-item>
        <nz-form-control>
          <nz-select formControlName="stepsAfter"
                     nzMode="multiple"
                     nzPlaceHolder="Please select the steps after this step"

          >
            <nz-option *ngFor="let item of etapes"
                       nzCustomContent
                       [nzValue]="item.indexLigne+'-'+item.indexColonne"
                       [nzLabel]="item.categorie?.nom ?? ''"

            >
              <span nz-tooltip
                    nzTooltipTitle="{{item.description}}">
                {{item.categorie?.nom ?? ''}}
              </span>
            </nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>
  </div>
</form>
